(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{255:function(e,t,n){"use strict";var r=n(3),o=n(78).find,l=n(133),c="find",d=!0;c in[]&&Array(1).find((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},260:function(e,t,n){var content=n(276);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(107).default)("a675ade8",content,!0,{sourceMap:!1})},275:function(e,t,n){"use strict";n(260)},276:function(e,t,n){var r=n(106)(!1);r.push([e.i,"input[type=number][data-v-28afb9a8],input[type=text][data-v-28afb9a8]{background-color:transparent;background-color:initial;color:inherit;text-align:center;font-size:28px;margin:10px}input[type=file][data-v-28afb9a8]{margin:10px}.input-type[data-v-28afb9a8]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;z-index:-1;transition:.2s;opacity:0;width:100%}.input-type img[data-v-28afb9a8]{width:50px}.show[data-v-28afb9a8]{opacity:1;z-index:1}.editor[data-v-28afb9a8]{overflow:hidden;border-radius:10px}.editor[data-v-28afb9a8],.popup[data-v-28afb9a8]{display:flex;flex-direction:column;justify-content:center;align-items:center}.popup[data-v-28afb9a8]{position:absolute;font-size:24px;top:0;left:0;background-color:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);width:100%;height:100%}.question-type[data-v-28afb9a8]{display:flex;align-items:center;width:100%}.type-button[data-v-28afb9a8]{cursor:pointer;font-size:var(--font-size-average);margin-left:10px;border-radius:10px;padding:5px 15px;background-color:rgba(99,96,116,.26667);color:#38322c}.type-active[data-v-28afb9a8]{background-color:rgba(59,71,63,.494);color:#fff}.btn[data-v-28afb9a8]{cursor:pointer;margin-left:20px;transition:.2s}.btn[data-v-28afb9a8]:hover{color:hsla(0,0%,100%,.788)}.form[data-v-28afb9a8]{display:flex;flex-direction:column;align-items:center;background-color:hsla(0,0%,100%,.98039);color:#000;border-radius:10px;padding:30px}.form textarea[data-v-28afb9a8]{background-color:rgba(216,251,213,.33);font-size:var(--font-size-average);margin-bottom:20px}.table[data-v-28afb9a8]{box-sizing:border-box;width:100%;height:90vh}.table input[data-v-28afb9a8]{margin:0 auto;width:100%}.line[data-v-28afb9a8]{display:flex;justify-content:space-between;align-items:center;width:100%;height:100%}.body[data-v-28afb9a8]{cursor:pointer;text-align:center;width:100%;font-size:var(--font-size-big)}.body[data-v-28afb9a8]:hover{color:rgba(19,157,192,.65)}.control-cell button[data-v-28afb9a8]{cursor:pointer;border:none;font-size:var(--font-size-average);background-color:rgba(99,96,116,.26667);color:#38322c;padding:10px 20px;border-radius:10px;transition:.3s}.control-cell button[data-v-28afb9a8]:hover{background-color:rgba(40,7,224,.26667);color:#181513}.popup-enter-active[data-v-28afb9a8],.popup-leave-active[data-v-28afb9a8]{transition:opacity .2s}.popup-enter[data-v-28afb9a8],.popup-leave-to[data-v-28afb9a8]{opacity:0}",""]),e.exports=r},292:function(e,t,n){"use strict";n.r(t);var r=n(5);n(10),n(77),n(255),n(41),n(25),n(28);function o(e,t){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=n.name+Date.now();t.storage.ref(r).put(n).then((function(){t.storage.ref(r).getDownloadURL().then((function(t){e(t)}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(Object(r.a)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<n.length)){e.next=7;break}return e.next=4,t.firestore.collection("scenarios").doc(n[i].id.toString()).set(n[i]);case 4:i++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d={name:"V-editor",props:["selectId"],data:function(){return{isSetCell:!1,selectedCell:{key:0,key2:0},Scenario:{},scenarios:[]}},methods:{uploadFile:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(t.$fire,e.target.files[0]);case 2:t.Scenario.table[t.selectedCell.key].cols[t.selectedCell.key2].src=n.sent,t.$forceUpdate();case 4:case"end":return n.stop()}}),n)})))()},openQuestion:function(e){this.selectedCell={key:e[0],key2:e[1]},this.isSetCell=!0},nextCategory:function(e){e+1<this.Scenario.table.length?this.$refs.table.setFocus("tableCategory"+(e+1).toString()):this.openQuestion([0,0])},nextQuestion:function(){var e=this.selectedCell.key,col=this.selectedCell.key2;col<this.tableColsLength-1?(this.Scenario.table[e].cols[col+1].score=this.Scenario.table[e].cols[col].score+200,this.selectedCell.key2++):(this.selectedCell.key2=0,this.tableRowsLength-1>e&&this.selectedCell.key++),this.$refs.tArea1.focus()},prevQuestion:function(){var e=this.selectedCell.key;this.selectedCell.key2>0?this.selectedCell.key2--:(this.selectedCell.key2=this.tableColsLength-1,e>0&&this.selectedCell.key--)},setScenario:function(e){this.scenarios=JSON.parse(JSON.stringify(this.$store.state.scenarios)),this.Scenario=this.scenarios.find((function(t){return t.id==e}))},deleteScenario:function(){var e=this;this.scenarios=this.scenarios.filter((function(t){return t.id!=e.Scenario.id}))}},computed:{tableRowsLength:function(){return this.Scenario.table.length},tableColsLength:function(){return this.Scenario.table[this.selectedCell.key].cols.length},answer:function(){return this.Scenario.table[this.selectedCell.key].cols[this.selectedCell.key2].answer},question:function(){return this.Scenario.table[this.selectedCell.key].cols[this.selectedCell.key2].question},type:function(){return this.Scenario.table[this.selectedCell.key].cols[this.selectedCell.key2].type}},watch:{selectId:{handler:function(e){this.setScenario(e)},deep:!0}},mounted:function(){this.selectId&&this.setScenario(this.selectId)},beforeDestroy:function(){this.$store.commit("SET_SCENARIOS",this.scenarios),function(e,t){c.apply(this,arguments)}(this.$fire,this.scenarios)}},f=d,y=(n(275),n(45)),component=Object(y.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor"},[n("transition",{attrs:{name:"popup"}},[e.isSetCell?n("div",{staticClass:"popup",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.isSetCell=!1}}},[n("div",{staticClass:"form"},[n("span",{staticClass:"head"},[e._v("\n          "+e._s(e.Scenario.table[e.selectedCell.key].header)+"||\n          "+e._s(e.selectedCell.key2+1)+" из "+e._s(e.tableColsLength))]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].question,expression:"\n            Scenario.table[selectedCell.key].cols[selectedCell.key2].question\n          "}],ref:"tArea1",staticClass:"inputs",attrs:{cols:"90",rows:"10",placeholder:"Вопрос:"},domProps:{value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].question},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$refs.tArea1.blur()},keypress:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$refs.tArea2.focus()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}],input:function(t){t.target.composing||e.$set(e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2],"question",t.target.value)}}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].answer,expression:"\n            Scenario.table[selectedCell.key].cols[selectedCell.key2].answer\n          "}],ref:"tArea2",staticClass:"inputs",attrs:{cols:"90",rows:"10",placeholder:"Ответ:"},domProps:{value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].answer},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$refs.tArea2.blur()},keypress:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.nextQuestion()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}],input:function(t){t.target.composing||e.$set(e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2],"answer",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].score,expression:"\n            Scenario.table[selectedCell.key].cols[selectedCell.key2].score\n          ",modifiers:{number:!0}}],staticClass:"score inputs",attrs:{type:"number",placeholder:"Очки:"},domProps:{value:e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2].score},on:{input:function(t){t.target.composing||e.$set(e.Scenario.table[e.selectedCell.key].cols[e.selectedCell.key2],"score",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("div",{staticClass:"control-cell"},[n("button",{on:{click:function(t){return e.prevQuestion()}}},[e._v("Предыдущий")]),e._v(" "),n("button",{on:{click:function(t){return e.nextQuestion()}}},[e._v("Следующий")])])])]):e._e()]),e._v(" "),n("div",{staticClass:"table"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.Scenario.name,expression:"Scenario.name"}],ref:"iName",staticClass:"table-heading input",attrs:{type:"text",placeholder:"Название",maxlength:"30"},domProps:{value:e.Scenario.name},on:{input:function(t){t.target.composing||e.$set(e.Scenario,"name",t.target.value)}}}),e._v(" "),n("V-table",{ref:"table",attrs:{table:e.Scenario.table,readonly:!1},on:{tableClick:function(t){return e.openQuestion(t)}}})],1)],1)}),[],!1,null,"28afb9a8",null);t.default=component.exports}}]);